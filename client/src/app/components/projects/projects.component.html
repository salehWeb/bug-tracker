<div class="w-full grid mt-10 gap-5 justify-evenly grid-cols-3 h-20 md:h-30 lg:h-40  items-center">

  <div class="flex w-full text-white font-semibold flex-col hover-animation-card bg-blue-400 items-center justify-center rounded-md shadow-md h-full text-center">
    <h2 *ngIf="Count">{{Count > 1 ? "Projects" : "Project"}}</h2>
    <span *ngIf="Count" class="text-lg">{{Count}}</span>
    <h3 *ngIf="!Count">Projects</h3>
    <h3 *ngIf="!Count">None</h3>
  </div>

  <div class="flex w-full text-white font-semibold flex-col hover-animation-card bg-blue-400 items-center justify-center rounded-md shadow-md h-full text-center">
    <h2 *ngIf="Closed">{{Closed > 1 ? "Closed projects" : "Closed project"}}</h2>
    <span *ngIf="Closed" class="text-lg">{{Closed}}</span>
    <h3 *ngIf="!Closed">Closed projects</h3>
    <h3 *ngIf="!Closed">None</h3>
  </div>

  <div class="flex w-full text-white font-semibold flex-col hover-animation-card bg-blue-400 items-center justify-center rounded-md shadow-md h-full text-center">
    <h2 *ngIf="Open">{{Open > 1 ? "Open Projects" : "open project"}}</h2>
    <span *ngIf="Open" class="text-lg">{{Open}}</span>
    <h2 *ngIf="!Open">Open projects</h2>
    <h3 *ngIf="!Open">None</h3>
  </div>

</div>

<div class="mt-20 mb-10 w-full flex items-center justify-center">
  <h1 class="text-gray-800 text-3xl"><span class="underline-line">Projects</span></h1>
</div>

<mat-form-field appearance="standard" class="mt-10 ml-8">
  <mat-label>Filter</mat-label>
  <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
</mat-form-field>

<div class="mat-elevation-z8 mb-20 ">
  <table mat-table class="min-w-full" [dataSource]="dataSource">

    <ng-container matColumnDef="Name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell class="link" routerLink="/project/{{element.id}}" *matCellDef="let element"> {{element.name}} </td>
    </ng-container>

    <ng-container matColumnDef="Title">
      <th mat-header-cell *matHeaderCellDef>Title</th>
      <td mat-cell *matCellDef="let element"> {{element.title}} </td>
    </ng-container>

    <ng-container matColumnDef="State">
      <th mat-header-cell *matHeaderCellDef>State</th>
      <td mat-cell *matCellDef="let element"> {{element.isClosed ? "closed" : "open"}} </td>
    </ng-container>


    <ng-container matColumnDef="CreatedAt">
      <th mat-header-cell *matHeaderCellDef>Created At</th>
      <td mat-cell *matCellDef="let element"> {{_moment(element.createdAt).fromNow()}} </td>
    </ng-container>

    <ng-container *ngIf="isAdminOrProjectManger" matColumnDef="Update">
      <th mat-header-cell *matHeaderCellDef>Update</th>
      <td mat-cell (click)="handelUpdateProject(element.id)"
        class="link" *matCellDef="let element">Update</td>
    </ng-container>



    <ng-container *ngIf="isAdminOrProjectManger" matColumnDef="Close">
      <th mat-header-cell *matHeaderCellDef>Close</th>

      <td mat-cell  (click)="handelCloseOrOpenProject(element.id)"
        class='hover:underline cursor-pointer {{!element.isClosed ? "text-orange-400 hover:text-orange-600" : "text-green-400 hover:text-green-600"}}'
        *matCellDef="let element">
        {{element.isClosed ? "Open" : "Close"}}
      </td>
    </ng-container>



    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row class="hover:bg-gray-200 transition-all ease-in-out duration-150"
      *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
  </mat-paginator>
</div>



<div *ngIf="isAdminOrProjectManger" class="flex justify-evenly mb-20 flex-row items-center">
  <app-new-project [updateProject]="updateProject"></app-new-project>
</div>